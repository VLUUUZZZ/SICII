<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.example.sici1.controller.CategoriasView"
            stylesheets="@/org/example/sici1/styles.css">

    <!-- TOP: Barra de título y acción -->
    <top>
        <VBox spacing="14" styleClass="header-box">
            <padding>
                <Insets top="16" left="32" right="32" bottom="8"/>
            </padding>
            <HBox spacing="18" alignment="CENTER_LEFT">
                <Label text="Gestión de Categorías" styleClass="title-label">
                    <font>
                        <Font name="Segoe UI Semibold" size="24"/>
                    </font>
                </Label>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnNuevaCategoria" text="+ Nueva Categoría" styleClass="primary-button" minWidth="165"/>
            </HBox>
            <Separator styleClass="header-separator"/>
        </VBox>
    </top>

    <!-- CENTER: Tabla dentro de una tarjeta visual -->
    <center>
        <VBox spacing="18" styleClass="card-container">
            <padding>
                <Insets top="24" left="32" right="32" bottom="20"/>
            </padding>
            <TableView fx:id="tableCategorias" styleClass="category-table" prefHeight="340">
                <columns>
                    <TableColumn fx:id="colId" text="ID" styleClass="table-column" prefWidth="55"/>
                    <TableColumn fx:id="colCodigo" text="Código" styleClass="table-column" prefWidth="110"/>
                    <TableColumn fx:id="colNombre" text="Nombre" styleClass="table-column" prefWidth="150"/>
                    <TableColumn fx:id="colTipo" text="Tipo" styleClass="table-column" prefWidth="120"/>
                    <TableColumn fx:id="colArea" text="Área Responsable" styleClass="table-column" prefWidth="140"/>
                    <TableColumn fx:id="colEstado" text="Estado" styleClass="table-column" prefWidth="90"/>
                    <TableColumn fx:id="colDescripcion" text="Descripción" styleClass="table-column" prefWidth="200"/>
                    <TableColumn fx:id="colAcciones" text="Acciones" styleClass="table-column" prefWidth="110"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>
    </center>

    <!-- BOTTOM: Formulario como tarjeta flotante para editar/agregar -->
    <bottom>
        <VBox fx:id="formContainer" spacing="22" styleClass="form-container" visible="false">
            <padding>
                <Insets top="23" left="50" right="50" bottom="28"/>
            </padding>
            <Label text="Agregar / Editar Categoría" styleClass="subtitle-label"/>
            <GridPane hgap="18" vgap="13">
                <columnConstraints>
                    <ColumnConstraints halignment="RIGHT" minWidth="110"/>
                    <ColumnConstraints halignment="LEFT" hgrow="ALWAYS"/>
                </columnConstraints>

                <Label text="Código:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="form-label"/>
                <HBox spacing="12" GridPane.rowIndex="0" GridPane.columnIndex="1">
                    <TextField fx:id="txtCodigo" promptText="Código único" styleClass="form-input" HBox.hgrow="ALWAYS"/>
                    <Button fx:id="btnGenerarCodigo" text="Generar" styleClass="small-button" minWidth="70"/>
                </HBox>

                <Label text="Nombre:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="form-label"/>
                <TextField fx:id="txtNombre" promptText="Ingrese el nombre" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="form-input"/>

                <Label text="Tipo:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="form-label"/>
                <ComboBox fx:id="cmbTipo" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="form-combobox"/>

                <Label text="Área Responsable:" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="form-label"/>
                <TextField fx:id="txtArea" promptText="Departamento, laboratorio..." GridPane.rowIndex="3" GridPane.columnIndex="1" styleClass="form-input"/>

                <Label text="Estado:" GridPane.rowIndex="4" GridPane.columnIndex="0" styleClass="form-label"/>
                <ComboBox fx:id="cmbEstado" GridPane.rowIndex="4" GridPane.columnIndex="1" styleClass="form-combobox"/>

                <Label text="Descripción:" GridPane.rowIndex="5" GridPane.columnIndex="0" styleClass="form-label"/>
                <TextArea fx:id="txtDescripcion" promptText="Ingrese la descripción" GridPane.rowIndex="5" GridPane.columnIndex="1" styleClass="form-textarea"/>
            </GridPane>
            <HBox spacing="18" alignment="CENTER_RIGHT" styleClass="form-button-row">
                <Button fx:id="btnCancelar" text="Cancelar" styleClass="secondary-button" minWidth="110"/>
                <Button fx:id="btnGuardar" text="Guardar" styleClass="primary-button" minWidth="110"/>
                <Button fx:id="btnEliminar" text="Eliminar" styleClass="danger-button" minWidth="110"/>
            </HBox>
        </VBox>
    </bottom>
</BorderPane>
